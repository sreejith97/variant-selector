<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <main>
      <div class="price-container">
        <div class="heading-container">
          <div class="dash-break"></div>
          <div class="heading">YAY! It&apos;s BOGO</div>
          <div class="dash-break"></div>
        </div>
        <div class="price-card" data-units="1">
          <div class="price-details">
            <div class="radio-container">
              <input type="radio" name="unit" value="1" />
            </div>
            <div class="unit-info">
              <p class="unit-details">
                1 Unit <span class="unit-offer-tags">10% Off</span>
              </p>
              <p class="price-type">Standard Price</p>
            </div>
            <div class="price-values">
              <p class="current-price">$10.00 USD</p>
              <p class="original-price">$24.00 USD</p>
            </div>
          </div>
          <div class="varient-selector" style="display: none">
            <table class="varient-table">
              <thead>
                <tr class="header-row">
                  <th></th>
                  <th>Size</th>
                  <th>Colour</th>
                </tr>
              </thead>
              <tbody>
                <tr class="varient-row">
                  <td>#1</td>
                  <td>
                    <select class="size-selector">
                      <option value="small">Small</option>
                      <option value="medium">Medium</option>
                      <option value="large">Large</option>
                    </select>
                  </td>
                  <td>
                    <select class="color-selector">
                      <option value="red">Red</option>
                      <option value="blue">Blue</option>
                      <option value="green">Green</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="price-card" data-units="2" style="position: relative">
          <div class="price-details">
            <div class="radio-container">
              <input type="radio" name="unit" value="2" />
            </div>
            <div class="unit-info">
              <p class="unit-details">
                2 Units <span class="unit-offer-tags">10% Off</span>
              </p>
            </div>
            <div class="price-values">
              <p class="current-price">$18.00 USD</p>
              <p class="original-price">$48.00 USD</p>
            </div>
          </div>
          <div class="varient-selector" style="display: none">
            <table class="varient-table">
              <thead>
                <tr class="header-row">
                  <th></th>
                  <th>Size</th>
                  <th>Colour</th>
                </tr>
              </thead>
              <tbody>
                <tr class="varient-row">
                  <td>#1</td>
                  <td>
                    <select class="size-selector">
                      <option value="small">Small</option>
                      <option value="medium">Medium</option>
                      <option value="large">Large</option>
                    </select>
                  </td>
                  <td>
                    <select class="color-selector">
                      <option value="red">Red</option>
                      <option value="blue">Blue</option>
                      <option value="green">Green</option>
                    </select>
                  </td>
                </tr>
                <tr class="varient-row">
                  <td>#2</td>
                  <td>
                    <select class="size-selector">
                      <option value="small">Small</option>
                      <option value="medium">Medium</option>
                      <option value="large">Large</option>
                    </select>
                  </td>
                  <td>
                    <select class="color-selector">
                      <option value="red">Red</option>
                      <option value="blue">Blue</option>
                      <option value="green">Green</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="popular-tag">
            <p>MOST POPULAR</p>
          </div>
        </div>

        <div class="price-card" data-units="3">
          <div class="price-details">
            <div class="radio-container">
              <input type="radio" name="unit" value="3" />
            </div>
            <div class="unit-info">
              <p class="unit-details">
                3 Units <span class="unit-offer-tags">10% Off</span>
              </p>
            </div>
            <div class="price-values">
              <p class="current-price">$24.00 USD</p>
              <p class="original-price">$72.00 USD</p>
            </div>
          </div>
          <div class="varient-selector" style="display: none">
            <table class="varient-table">
              <thead>
                <tr class="header-row">
                  <th></th>
                  <th>Size</th>
                  <th>Colour</th>
                </tr>
              </thead>
              <tbody>
                <tr class="varient-row">
                  <td>#1</td>
                  <td>
                    <select class="size-selector">
                      <option value="small">Small</option>
                      <option value="medium">Medium</option>
                      <option value="large">Large</option>
                    </select>
                  </td>
                  <td>
                    <select class="color-selector">
                      <option value="red">Red</option>
                      <option value="blue">Blue</option>
                      <option value="green">Green</option>
                    </select>
                  </td>
                </tr>
                <tr class="varient-row">
                  <td>#2</td>
                  <td>
                    <select class="size-selector">
                      <option value="small">Small</option>
                      <option value="medium">Medium</option>
                      <option value="large">Large</option>
                    </select>
                  </td>
                  <td>
                    <select class="color-selector">
                      <option value="red">Red</option>
                      <option value="blue">Blue</option>
                      <option value="green">Green</option>
                    </select>
                  </td>
                </tr>
                <tr class="varient-row">
                  <td>#3</td>
                  <td>
                    <select class="size-selector">
                      <option value="small">Small</option>
                      <option value="medium">Medium</option>
                      <option value="large">Large</option>
                    </select>
                  </td>
                  <td>
                    <select class="color-selector">
                      <option value="red">Red</option>
                      <option value="blue">Blue</option>
                      <option value="green">Green</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="total-price-container">
          <p>Free Delivery</p>
          <p id="total-price">Total: $0.00 USD</p>
        </div>
        <button class="submit-button">Add to Cart</button>
      </div>
    </main>

    <script>
      const priceCards = document.querySelectorAll(".price-card");
      const totalPriceEl = document.getElementById("total-price");
      const submitButton = document.querySelector(".submit-button");

      let selectedUnit = null;

      priceCards.forEach((card) => {
        const radio = card.querySelector("input[type='radio']");
        const variantSelector = card.querySelector(".varient-selector");
        const currentPrice = card.querySelector(".current-price").textContent;

        card.addEventListener("click", (event) => {
          if (
            event.target.tagName === "INPUT" &&
            event.target.type === "radio"
          ) {
            return;
          }

          radio.checked = true;

          priceCards.forEach((c) => {
            c.classList.remove("selected");
            const selector = c.querySelector(".varient-selector");
            selector.classList.remove("expanded");
          });

          card.classList.add("selected");
          variantSelector.classList.add("expanded");

          selectedUnit = {
            units: card.dataset.units,
            price: currentPrice,
          };
          totalPriceEl.textContent = `Total: ${currentPrice}`;
        });

        radio.addEventListener("change", () => {
          priceCards.forEach((c) => {
            c.classList.remove("selected");
            const selector = c.querySelector(".varient-selector");
            selector.classList.remove("expanded");
          });

          card.classList.add("selected");
          variantSelector.classList.add("expanded");

          selectedUnit = {
            units: card.dataset.units,
            price: currentPrice,
          };
          totalPriceEl.textContent = `Total: ${currentPrice}`;
        });
      });

      submitButton.addEventListener("click", () => {
        if (!selectedUnit) {
          alert("Please select a unit first!");
          return;
        }

        const selectedVariants = [];
        document.querySelectorAll(".varient-selector").forEach((selector) => {
          if (selector.style.display === "block") {
            selector.querySelectorAll(".varient-row").forEach((row) => {
              const size = row.querySelector(".size-selector").value;
              const color = row.querySelector(".color-selector").value;
              selectedVariants.push({ size, color });
            });
          }
        });

        console.log({
          selectedUnit,
          selectedVariants,
        });
      });

      document.querySelectorAll(".price-card").forEach((card) => {
        const radio = card.querySelector("input[type='radio']");
        const variantSelector = card.querySelector(".varient-selector");
        const currentPrice = card.querySelector(".current-price").textContent;

        card.addEventListener("click", (event) => {
          if (
            event.target.tagName === "INPUT" &&
            event.target.type === "radio"
          ) {
            return;
          }
          radio.checked = true;
          document.querySelectorAll(".varient-selector").forEach((selector) => {
            selector.style.display = "none";
          });
          variantSelector.style.display = "block";
          selectedUnit = {
            units: card.dataset.units,
            price: currentPrice,
          };
          totalPriceEl.textContent = `Total: ${currentPrice}`;
        });

        radio.addEventListener("change", () => {
          document.querySelectorAll(".varient-selector").forEach((selector) => {
            selector.style.display = "none";
          });
          variantSelector.style.display = "block";

          selectedUnit = {
            units: card.dataset.units,
            price: currentPrice,
          };
          totalPriceEl.textContent = `Total: ${currentPrice}`;
        });
      });
    </script>
  </body>
</html>
